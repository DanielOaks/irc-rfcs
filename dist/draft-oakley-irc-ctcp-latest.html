<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Internet Relay Chat: Client-to-Client Protocol (CTCP)</title>

  
<style type="text/css">/*<![CDATA[*/
@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}

@media screen and (min-width: 1024px) {
  ul.toc, #rfc\.toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 500px);
    width: 300px;
    padding: 0 1em;
    z-index: 1;
  }
  #rfc\.toc {
    top: 16px;
  }
  ul.toc {
    top: 80px;
    overflow: auto;
  }

  body {
    padding-left: 1.5em;
    padding-right: 29em;
  }
}

body {
  font: 15px "Helvetica Neue",Helvetica,Arial,sans-serif;
  color: #333;
  font-size-adjust: 0.5;
  line-height: 130%;
  margin: 2.5em auto;
  max-width: 724px;
}

.title, .filename, h1, h2, h3, h4 {
  font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
  font-size-adjust: 0.5;
  font-weight: 500;
  color: #333;
  line-height: 100%;
  margin: 0.8em 0 0.3em;
}
.title { font-size: 36px; }
h1 { font-size: 30px; }
h2 { font-size: 24px; }
h3, h4 { font-size: 18px; }
h1 a[href], h2 a[href], h3 a[href], h4 a[href] {
  color: #333;
}

ul.toc li {
  list-style: none;
  text-indent: -2.5em;
  padding-left: 2.5em;
  padding-bottom: 5px;
  margin: 0;
}
ul.toc ul {
  margin: 0;
}
/* xml2rfc nests ul directly inside ul which messes with the style badly */
ul.toc, ul.toc>ul, ul.toc ul>ul {
  margin: 0 0 0 1.5em;
}

table {
  margin-left: 0em;
  border-collapse: collapse;
}
th {
  text-align: left;
  border-bottom: 2px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
  vertical-align: top;
}
tr:nth-child(2n+1) > td,
tr:nth-child(2n+1) > th {
  background-color: #f9f9f9;
}
td.reference {
  max-width: 200px;
  border-top: none;
  padding-right: 1em;
}
.right {
  text-align: right;
}


table.header {
  width: 100%;
}
table.header td {
  border: none;
  background-color: transparent;
  color: black;
}
.filename {
  color: rgb(119, 119, 119);
  font-size: 23px;
  font-weight: normal;
  height: auto;
  line-height: 100%;
}
#rfc\.abstract+p {
  font-size: 20px;
  font-weight: 300;
  line-height: 130%;
}

samp, tt, code, pre {
  font: 11pt consolas, monospace;
  font-size-adjust: none;
}
pre {
  background-color: #eee;
  border: 1px solid #ddd;
  overflow-x: auto;
  padding: 5px;
  margin: 5px;
}
.figure {
  font-style: italic;
  margin: 0 1.5em;
}

address {
  margin: 10px 0 0;
}
.vcard {
  font-style: normal;
}
.vcardline {
  display: block;
}
.vcardline .fn {
  font-weight: bold;
}
.vcardline .hidden {
  display: none;
}

dl {
  margin-left: 1em;
}
dl.dl-horizontal: {
  margin-left: 0;
}
dl > dt {
  float: left;
  margin-right: 1em;
}
dl.nohang > dt {
  float: none;
}
dl > dd {
  margin-bottom: .5em;
}
dl.compact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}
ul.empty {
  list-style-type: none;
}
ul.empty li {
  margin-top: .5em;
}

hr {
  border: 0;
  border-top: 1px solid #eee;
}

a {
  text-decoration: none;
}
a[href] {
  color: #2a6496;
}
a[href]:hover {
  background-color: #eee;
}

ol, ul, li, p {
  padding: 0;
  margin: 0.5em 0 0.5em 2em;
}
li, p {
  margin-left: 0;
}
address {
  font-style: normal;
}

.github-fork-ribbon-wrapper {
  display: none;
}
@media screen and (min-width: 800px) {
  /* "Fork me on GitHub" CSS ribbon based on
   * https://github.com/simonwhitaker/github-fork-ribbon-css
   */
  .github-fork-ribbon {
    position: absolute;
    padding: 2px 0;
    background-color: #a00;
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));
    box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);
    font: 700 12px "Helvetica Neue", Helvetica, Arial, sans-serif;

    pointer-events: auto;

    top: 38px;
    right: -45px;

    transform: rotate(45deg);
  }

  .github-fork-ribbon a[href],
  .github-fork-ribbon a[href]:hover {
    color: #fff;
    background-color: transparent;
    text-decoration: none;
    text-shadow: 0 -1px rgba(0, 0, 0, 0.5);
    text-align: center;

    width: 190px;
    line-height: 18px;

    display: inline-block;
    padding: 2px 0;

    border: 1.5px dotted #fff;
    border-color: rgba(255, 255, 255, 0.6);
  }

  .github-fork-ribbon-wrapper {
    display: block;
    width: 130px;
    height: 130px;
    position: absolute;
    overflow: hidden;
    top: 0; right: 0;
    z-index: 2;
    pointer-events: none;
  }
}
@media screen and (min-width: 1000px) {
  .github-fork-ribbon-wrapper {
    position: fixed;
  }

/*]]>*/</style>


  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Protocol Structure">
<link href="#rfc.section.3" rel="Chapter" title="3 Message Syntax">
<link href="#rfc.section.4" rel="Chapter" title="4 Message Types">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Extended formatting">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Metadata Query">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Extended Query">
<link href="#rfc.section.5" rel="Chapter" title="5 Messages">
<link href="#rfc.section.6" rel="Chapter" title="6 Acknowledgements">
<link href="#rfc.section.7" rel="Chapter" title="7 Security Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 IANA Considerations">
<link href="#rfc.references" rel="Chapter" title="9 Normative References">
<link href="#rfc.appendix.A" rel="Chapter" title="A Message List">
<link href="#rfc.appendix.A.1" rel="Chapter" title="A.1 ACTION">
<link href="#rfc.appendix.A.2" rel="Chapter" title="A.2 CLIENTINFO">
<link href="#rfc.appendix.A.3" rel="Chapter" title="A.3 DCC">
<link href="#rfc.appendix.A.4" rel="Chapter" title="A.4 FINGER">
<link href="#rfc.appendix.A.5" rel="Chapter" title="A.5 PING">
<link href="#rfc.appendix.A.6" rel="Chapter" title="A.6 SOURCE">
<link href="#rfc.appendix.A.7" rel="Chapter" title="A.7 TIME">
<link href="#rfc.appendix.A.8" rel="Chapter" title="A.8 VERSION">
<link href="#rfc.appendix.A.9" rel="Chapter" title="A.9 USERINFO">
<link href="#rfc.appendix.B" rel="Chapter" title="B Change History [RFC Editor: Please remove this section]">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content="xml2rfc version 2.9.6 - https://tools.ietf.org/tools/xml2rfc" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />

  <meta name="dct.creator" content="Mikulenas, M. and D. Oakley" />
  <meta name="dct.identifier" content="urn:ietf:id:draft-oakley-irc-ctcp-latest" />
  <meta name="dct.issued" scheme="ISO8601" content="2018-04-27" />
  <meta name="dct.abstract" content="This document describes the Client-to-Client Protocol (CTCP), which lets Internet Relay Chat (IRC) clients send each other messages that get displayed or responded to in special ways. CTCP has been widely implemented, with most clients supporting it natively. This document outlines how to implement CTCP and the most common messages used." />
  <meta name="description" content="This document describes the Client-to-Client Protocol (CTCP), which lets Internet Relay Chat (IRC) clients send each other messages that get displayed or responded to in special ways. CTCP has been widely implemented, with most clients supporting it natively. This document outlines how to implement CTCP and the most common messages used." />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">M. Mikulenas</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Independent</td>
</tr>
<tr>
<td class="left">Updates: 1459, 2812 (if approved)</td>
<td class="right">D. Oakley</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">ircdocs</td>
</tr>
<tr>
<td class="left">Expires: October 29, 2018</td>
<td class="right">April 27, 2018</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Internet Relay Chat: Client-to-Client Protocol (CTCP)<br />
  <span class="filename">draft-oakley-irc-ctcp-latest</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document describes the Client-to-Client Protocol (CTCP), which lets Internet Relay Chat (IRC) clients send each other messages that get displayed or responded to in special ways. CTCP has been widely implemented, with most clients supporting it natively. This document outlines how to implement CTCP and the most common messages used.</p>
<p>It updates RFC 1459 and RFC 2812.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of This Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet-Drafts is at https://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on October 29, 2018.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2018 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (https://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Protocol Structure</a>
</li>
<li>3.   <a href="#rfc.section.3">Message Syntax</a>
</li>
<li>4.   <a href="#rfc.section.4">Message Types</a>
</li>
<ul><li>4.1.   <a href="#rfc.section.4.1">Extended formatting</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Metadata Query</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Extended Query</a>
</li>
</ul><li>5.   <a href="#rfc.section.5">Messages</a>
</li>
<li>6.   <a href="#rfc.section.6">Acknowledgements</a>
</li>
<li>7.   <a href="#rfc.section.7">Security Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">IANA Considerations</a>
</li>
<li>9.   <a href="#rfc.references">Normative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.A">Message List</a>
</li>
<ul><li>A.1.   <a href="#rfc.appendix.A.1">ACTION</a>
</li>
<li>A.2.   <a href="#rfc.appendix.A.2">CLIENTINFO</a>
</li>
<li>A.3.   <a href="#rfc.appendix.A.3">DCC</a>
</li>
<li>A.4.   <a href="#rfc.appendix.A.4">FINGER</a>
</li>
<li>A.5.   <a href="#rfc.appendix.A.5">PING</a>
</li>
<li>A.6.   <a href="#rfc.appendix.A.6">SOURCE</a>
</li>
<li>A.7.   <a href="#rfc.appendix.A.7">TIME</a>
</li>
<li>A.8.   <a href="#rfc.appendix.A.8">VERSION</a>
</li>
<li>A.9.   <a href="#rfc.appendix.A.9">USERINFO</a>
</li>
</ul><li>Appendix B.   <a href="#rfc.appendix.B">Change History [RFC Editor: Please remove this section]</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#introduction" id="introduction">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">The core Internet Relay Chat (IRC) protocol as described in <a href="#RFC1459" class="xref">[RFC1459]</a> and <a href="#RFC2812" class="xref">[RFC2812]</a> does not provide a way to exchange computer-readable information directly between clients. The Client-to-Client Protocol (CTCP) lets them exchange messages that get processed, displayed or responded to in special ways.</p>
<p id="rfc.section.1.p.2">CTCP can be used to request special formatting on messages, query other clients for metadata, and help initiate file transfers with other clients among other uses. This document covers the subset of CTCP which is commonly implemented, and clients implementing this specification are compatible with those implementing the protocol as described by older documents.</p>
<p id="rfc.section.1.p.3">The key words &#8220;MUST&#8221;, &#8220;MUST NOT&#8221;, &#8220;REQUIRED&#8221;, &#8220;SHALL&#8221;, &#8220;SHALL NOT&#8221;, &#8220;SHOULD&#8221;, &#8220;SHOULD NOT&#8221;, &#8220;RECOMMENDED&#8221;,  &#8220;MAY&#8221;, and &#8220;OPTIONAL&#8221; in this document are to be interpreted as described in <a href="#RFC2119" class="xref">[RFC2119]</a>.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#protocol-structure" id="protocol-structure">Protocol Structure</a>
</h1>
<p id="rfc.section.2.p.1">CTCP queries are sent with the PRIVMSG IRC command, and CTCP replies are sent with NOTICE command. To indicate a CTCP query or reply, the body of the message (the second parameter) begins with the CTCP delimiter.</p>
<p id="rfc.section.2.p.2">Queries MAY be sent to channels. Replies MUST always be sent to the querying client only.</p>
<p id="rfc.section.2.p.3">Many servers implement optional filtering so that only specific CTCP commands can be sent to channels. When this is done, it can typically be enabled or disabled by channel operators with a channel mode.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#message-syntax" id="message-syntax">Message Syntax</a>
</h1>
<p id="rfc.section.3.p.1">The ABNF <a href="#RFC5234" class="xref">[RFC5234]</a> for CTCP message bodies is as follows:</p>
<pre>
  delim    = %x01

  command  = 1*( %x02-09 / %x0B-0C / %x0E-1F / %x21-FF )
                ; any octet except NUL, delim, CR, LF, and SPACE

  params   = 1*( %x02-09 / %x0B-0C / %x0E-FF )
                ; any octet except NUL, delim, CR, and LF

  body     = delim command [ SPACE params ] [ delim ]
</pre>
<p id="rfc.section.3.p.2">Commands are case-insensitive. When creating new CTCP commands, authors SHOULD use only alphanumeric characters for ease of implementation.</p>
<p id="rfc.section.3.p.3">The final CTCP delimiter SHOULD be sent on outgoing messages for compatibility reasons, but software MUST accept incoming messages which lack it. This avoids issues where messages are truncated or split by the server or client.</p>
<p id="rfc.section.3.p.4">In message examples throughout this document, the CTCP delimiter is shown as <samp>\x01</samp>.</p>
<p id="rfc.section.3.p.5">Here are two examples of CTCP queries and replies:</p>
<pre>
  :alice!a@localhost PRIVMSG bob :\x01VERSION\x01
  :bob!b@localhost NOTICE alice :\x01VERSION Snak for Mac 4.13\x01

  :alice!a@localhost PRIVMSG #ircv3 :\x01PING 1473523796 918320
  :bob!b@localhost NOTICE alice :\x01PING 1473523796 918320\x01
</pre>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#message-types" id="message-types">Message Types</a>
</h1>
<p id="rfc.section.4.p.1">CTCP messages conform to one of the types described below. These message types are defined here to simplify understanding, and aren&#8217;t differentiated by the protocol itself.</p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#extended-formatting" id="extended-formatting">Extended formatting</a>
</h1>
<p id="rfc.section.4.1.p.1">This type of CTCP requests special formatting of a user-visible message. That is, to send a user-visible message that should be displayed differently from regular messages - e.g. as an action, a whisper, an announcement.</p>
<p id="rfc.section.4.1.p.2">Extended formatting messages are sent as a PRIVMSG, and are expected to be used in channels as well as between clients. There is no automatic response to this message type, as it is not a query nor reply.</p>
<p id="rfc.section.4.1.p.3">These messages are sent as a PRIVMSG and can have parameters, but generate no reply.</p>
<p id="rfc.section.4.1.p.4">Example:</p>
<pre>
  :dan!u@localhost PRIVMSG #ircv3 :\x01ACTION writes some specs!\x01
</pre>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#metadata-query" id="metadata-query">Metadata Query</a>
</h1>
<p id="rfc.section.4.2.p.1">This type of CTCP provides static information about the target client, user or connection.</p>
<p id="rfc.section.4.2.p.2">This CTCP takes the form of a query and a response (as a PRIVMSG and NOTICE, respectively). Due to how bouncers interact with multiple clients, there may sometimes be multiple responses to queries.</p>
<p id="rfc.section.4.2.p.3">Metadata queries MUST NOT require the recipient to implement any side effects (beyond sending the reply itself); if a CTCP message causes side effects by design, it should be categorized as an extended query instead.</p>
<p id="rfc.section.4.2.p.4">Metadata queries do not have any parameters, but expect a reply with parameters as the response data.</p>
<p id="rfc.section.4.2.p.5">Example:</p>
<pre>
  :alice!a@localhost PRIVMSG bob :\x01VERSION\x01
  :bob!b@localhost NOTICE alice :\x01VERSION SaberChat 27.5\x01
</pre>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> <a href="#extended-query" id="extended-query">Extended Query</a>
</h1>
<p id="rfc.section.4.3.p.1">This type of CTCP provides dynamic information or invokes actions from the client.</p>
<p id="rfc.section.4.3.p.2">This CTCP takes the form of a query and a response (as a PRIVMSG and NOTICE, respectively).</p>
<p id="rfc.section.4.3.p.3">Queries sent to a channel always generate private replies.</p>
<p id="rfc.section.4.3.p.4">Extended queries and replies may have parameters.</p>
<p id="rfc.section.4.3.p.5">Example:</p>
<pre>
  :alice!a@localhost PRIVMSG bob :\x01PING 1473523796 918320\x01
  :bob!b@localhost NOTICE alice :\x01PING 1473523796 918320\x01
</pre>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#messages" id="messages">Messages</a>
</h1>
<p id="rfc.section.5.p.1">CTCP messages themselves are not standardised. Clients that receive either unexpected messages or known messages with unexpected values SHOULD ignore them and produce no response to the sending user. Clients MAY receive more than one response per user for a query they send, due to multiple clients being connected behind an IRC bouncer.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#acknowledgements" id="acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.6.p.1">Thanks to the IRCv3 group for giving feedback on this specification, and to Khaled Mardam-Bey for advice on client flood protection.</p>
<p id="rfc.section.6.p.2">Thanks to Michael Sandrof for creating CTCP, Troy Rollo for creating the related DCC protocol, as well as Klaus Zeuge and Ben Mesander who wrote and revised related specifications.</p>
<p id="rfc.section.6.p.3">Special thanks to dequis, Sadie Powell and James Wheare for help with this and related work.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#security-considerations" id="security-considerations">Security Considerations</a>
</h1>
<p id="rfc.section.7.p.1">CTCP messages are completely untrusted data, and clients MUST NOT assume that they are well-formed or complete.</p>
<p id="rfc.section.7.p.2">Older CTCP specifications describe quoting methods which are complex and not widely implemented. Implementations SHOULD NOT implement &#8220;low-level quoting&#8221; or &#8220;CTCP-level quoting&#8221; when parsing messages.</p>
<p id="rfc.section.7.p.3">Older CTCP specifications describe including more than one CTCP message inside a single PRIVMSG or NOTICE command. Implementations SHOULD NOT implement this form of CTCP parsing as it is not widely-implemented and may result in an implementation that can be more easily flooded off the server they are connected to.</p>
<p id="rfc.section.7.p.4">CTCP requests can be abused to flood clients off the server they are connected to. Clients may ignore or delay excessive incoming requests to protect against this.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#iana-considerations" id="iana-considerations">IANA Considerations</a>
</h1>
<p id="rfc.section.8.p.1">This document has no actions for IANA.</p>
<h1 id="rfc.references">
<a href="#rfc.references">9.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC1459">[RFC1459]</b></td>
<td class="top">
<a>Oikarinen, J.</a> and <a>D. Reed</a>, "<a href="https://tools.ietf.org/html/rfc1459">Internet Relay Chat Protocol</a>", RFC 1459, DOI 10.17487/RFC1459, May 1993.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a>Bradner, S.</a>, "<a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2812">[RFC2812]</b></td>
<td class="top">
<a>Kalt, C.</a>, "<a href="https://tools.ietf.org/html/rfc2812">Internet Relay Chat: Client Protocol</a>", RFC 2812, DOI 10.17487/RFC2812, April 2000.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5234">[RFC5234]</b></td>
<td class="top">
<a>Crocker, D.</a> and <a>P. Overell</a>, "<a href="https://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>", STD 68, RFC 5234, DOI 10.17487/RFC5234, January 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5322">[RFC5322]</b></td>
<td class="top">
<a>Resnick, P.</a>, "<a href="https://tools.ietf.org/html/rfc5322">Internet Message Format</a>", RFC 5322, DOI 10.17487/RFC5322, October 2008.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.A">
<a href="#rfc.appendix.A">Appendix A.</a> <a href="#message-list" id="message-list">Message List</a>
</h1>
<p id="rfc.section.A.p.1">This section is not exhaustive, and only lists those CTCP messages which are widely implemented across the IRC ecosystem.</p>
<p id="rfc.section.A.p.2">The reply and parameter lines below use a simplified syntax that represents variables by surrounding them with angle brackets.</p>
<h1 id="rfc.appendix.A.1">
<a href="#rfc.appendix.A.1">A.1.</a> <a href="#action" id="action">ACTION</a>
</h1>
<pre>
Type:    Extended Formatting
Params:  ACTION &lt;text&gt;
</pre>
<p id="rfc.section.A.1.p.1">This extended formatting message shows that &lt;text&gt; should be displayed as a third-person action or emote; in clients, it&#8217;s generally activated with the command <samp>/me</samp>.</p>
<p id="rfc.section.A.1.p.2">If &lt;text&gt; is empty, clients SHOULD still include a single space after <samp>ACTION</samp> (i.e. an empty params section) to help compatibility. Clients SHOULD correctly parse incoming ACTION messages with or without the params section.</p>
<p id="rfc.section.A.1.p.3">ACTION is universally implemented and very commonly used. Clients MUST implement this CTCP message to effectively use IRC.</p>
<p id="rfc.section.A.1.p.4">Examples:</p>
<pre>
  Raw:        :dan!user@host PRIVMSG #ircv3 :\x01ACTION does it!\x01

  Formatted:  * dan does it!
</pre>
<pre>
  Raw:        :dan!user@host PRIVMSG #ircv3 :\x01ACTION \x01
  Raw:        :dan!user@host PRIVMSG #ircv3 :\x01ACTION\x01
  Raw:        :dan!user@host PRIVMSG #ircv3 :\x01ACTION

  Formatted:  * dan
</pre>
<h1 id="rfc.appendix.A.2">
<a href="#rfc.appendix.A.2">A.2.</a> <a href="#clientinfo" id="clientinfo">CLIENTINFO</a>
</h1>
<pre>
Type:   Extended Query
Reply:  CLIENTINFO &lt;tokens&gt;
</pre>
<p id="rfc.section.A.2.p.1">This extended query returns a list of the CTCP messages that this client supports and implements, delimited by a single ASCII space.</p>
<p id="rfc.section.A.2.p.2">CLIENTINFO is widely implemented. Clients SHOULD implement this CTCP message.</p>
<p id="rfc.section.A.2.p.3">Example:</p>
<pre>
  Query:     CLIENTINFO
  Response:  CLIENTINFO ACTION DCC CLIENTINFO PING TIME VERSION
</pre>
<h1 id="rfc.appendix.A.3">
<a href="#rfc.appendix.A.3">A.3.</a> <a href="#dcc" id="dcc">DCC</a>
</h1>
<pre>
Type:    Extended Query
Params:  DCC &lt;type&gt; &lt;argument&gt; &lt;host&gt; &lt;port&gt;
</pre>
<p id="rfc.section.A.3.p.1">This extended query sets up and controls connections that go directly between clients, bypassing the IRC server. This is typically used for features that require a large amount of traffic between clients or simply wish to bypass the server itself such as file transfer and direct chat.</p>
<p id="rfc.section.A.3.p.2">The Direct Client-to-Client (DCC) Protocol requires its own specification, and is not described in-depth here.</p>
<p id="rfc.section.A.3.p.3">DCC is widely implemented. Clients MAY implement this CTCP message.</p>
<h1 id="rfc.appendix.A.4">
<a href="#rfc.appendix.A.4">A.4.</a> <a href="#finger" id="finger">FINGER</a>
</h1>
<pre>
Type:   Metadata Query
Reply:  FINGER &lt;info&gt;
</pre>
<p id="rfc.section.A.4.p.1">This metadata query returns miscellaneous info about the user, typically the same information that&#8217;s held in their realname field.</p>
<p id="rfc.section.A.4.p.2">However, some implementations return the client name and version instead.</p>
<p id="rfc.section.A.4.p.3">FINGER is largely obsolete. Clients MAY implement this CTCP message.</p>
<p id="rfc.section.A.4.p.4">Example:</p>
<pre>
  Query:     FINGER
  Response:  FINGER WeeChat 1.8-dev
</pre>
<h1 id="rfc.appendix.A.5">
<a href="#rfc.appendix.A.5">A.5.</a> <a href="#ping" id="ping">PING</a>
</h1>
<pre>
Type:    Extended Query
Params:  PING &lt;info&gt;
Reply:   PING &lt;info&gt;
</pre>
<p id="rfc.section.A.5.p.1">This extended query confirms reachability and latency to the target client. When receiving a CTCP PING, the reply MUST contain exactly the same parameters as the original query.</p>
<p id="rfc.section.A.5.p.2">PING is universally implemented. Clients SHOULD implement this CTCP message.</p>
<p id="rfc.section.A.5.p.3">Example:</p>
<pre>
  Query:     PING 1473523721 662865
  Response:  PING 1473523721 662865
  
  Query:     PING foo bar baz
  Response:  PING foo bar baz
</pre>
<h1 id="rfc.appendix.A.6">
<a href="#rfc.appendix.A.6">A.6.</a> <a href="#source" id="source">SOURCE</a>
</h1>
<pre>
Type:   Metadata Query
Reply:  SOURCE &lt;info&gt;
</pre>
<p id="rfc.section.A.6.p.1">This metadata query returns the location of the source code for the client.</p>
<p id="rfc.section.A.6.p.2">SOURCE is rarely implemented. Clients MAY implement this CTCP message.</p>
<p id="rfc.section.A.6.p.3">Example:</p>
<pre>
  Query:     SOURCE
  Response:  SOURCE https://weechat.org/download
</pre>
<h1 id="rfc.appendix.A.7">
<a href="#rfc.appendix.A.7">A.7.</a> <a href="#time" id="time">TIME</a>
</h1>
<pre>
Type:   Extended Query
Reply:  TIME &lt;timestring&gt;
</pre>
<p id="rfc.section.A.7.p.1">This extended query returns the client&#8217;s local time in an unspecified human-readable format. In practice, both the format output by ctime() and the format described in Section 3.3 of <a href="#RFC5322" class="xref">[RFC5322]</a> are common. Earlier specifications recommended prefixing the time string with a colon, but this is no longer recommended.</p>
<p id="rfc.section.A.7.p.2">New implementations MAY default to UTC time for privacy reasons.</p>
<p id="rfc.section.A.7.p.3">TIME is almost universally implemented. Clients MAY implement this CTCP message.</p>
<p id="rfc.section.A.7.p.4">Example:</p>
<pre>
  Query:     TIME
  Response:  TIME Mon, 08 May 2017 09:15:29 GMT
</pre>
<h1 id="rfc.appendix.A.8">
<a href="#rfc.appendix.A.8">A.8.</a> <a href="#version" id="version">VERSION</a>
</h1>
<pre>
Type:   Metadata Query
Reply:  VERSION &lt;verstring&gt;
</pre>
<p id="rfc.section.A.8.p.1">This metadata query returns the name and version of the client software in use. There is no specified format for the version string.</p>
<p id="rfc.section.A.8.p.2">Clients may allow users to customise the response value for this query.</p>
<p id="rfc.section.A.8.p.3">VERSION is universally implemented. Clients SHOULD implement this CTCP message.</p>
<p id="rfc.section.A.8.p.4">Example:</p>
<pre>
  Query:     VERSION
  Response:  VERSION WeeChat 1.8-dev (git: v1.7-329-g22f2fd03a)
</pre>
<h1 id="rfc.appendix.A.9">
<a href="#rfc.appendix.A.9">A.9.</a> <a href="#userinfo" id="userinfo">USERINFO</a>
</h1>
<pre>
Type:   Metadata Query
Reply:  USERINFO &lt;info&gt;
</pre>
<p id="rfc.section.A.9.p.1">This metadata query returns miscellaneous info about the user, typically the same information that&#8217;s held in their realname field.</p>
<p id="rfc.section.A.9.p.2">However, some implementations return <samp>&lt;nickname&gt; (&lt;realname&gt;)</samp> instead.</p>
<p id="rfc.section.A.9.p.3">USERINFO is largely obsolete. Clients MAY implement this CTCP message.</p>
<p id="rfc.section.A.9.p.4">Example:</p>
<pre>
  Query:     USERINFO
  Response:  USERINFO fred (Fred Foobar)
</pre>
<h1 id="rfc.appendix.B">
<a href="#rfc.appendix.B">Appendix B.</a> <a href="#change-history-rfc-editor-please-remove-this-section" id="change-history-rfc-editor-please-remove-this-section">Change History [RFC Editor: Please remove this section]</a>
</h1>
<p id="rfc.section.B.p.1">Changes from draft 1 (July 18, 2017)</p>
<p></p>

<ul>
<li>General editing, fixed mistypes.</li>
<li>Simplified some of the examples.</li>
</ul>
<p id="rfc.section.B.p.3">Changes from draft 0 (May 29, 2017)</p>
<p></p>

<ul>
<li>Added note about servers truncating CTCP messages (thanks Peter).</li>
<li>Fixed misspellings and added note to TIME about previously-recommended prefix (thanks Patrick).</li>
<li>Mentioned how to parse/send empty ACTION messages (thanks dequis and the crew).</li>
</ul>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Mantas Mikulenas</span> 
	  <span class="n hidden">
		<span class="family-name">Mikulenas</span>
	  </span>
	</span>
	<span class="org vcardline">Independent</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:grawity@gmail.com">grawity@gmail.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Daniel Oakley</span> 
	  <span class="n hidden">
		<span class="family-name">Oakley</span>
	  </span>
	</span>
	<span class="org vcardline">ircdocs</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:daniel@danieloaks.net">daniel@danieloaks.net</a></span>

  </address>
</div>

</body>
</html>
